\doxysection{Opus Custom}
\hypertarget{group__opus__custom}{}\label{group__opus__custom}\index{Opus Custom@{Opus Custom}}


Opus Custom is an optional part of the Opus specification and reference implementation which uses a distinct API from the regular API and supports frame sizes that are not normally supported. Use of Opus Custom is discouraged for all but very special applications for which a frame size different from 2.\+5, 5, 10, or 20 ms is needed (for either complexity or latency reasons) and where interoperability is less important.  


\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}}
\begin{DoxyCompactList}\small\item\em Contains the state of an encoder. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}}
\begin{DoxyCompactList}\small\item\em State of the decoder. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}}
\begin{DoxyCompactList}\small\item\em The mode contains all the information necessary to create an encoder. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__opus__custom_gac248b6f0c693ba2f4cf99f3487974400}{opus\+\_\+custom\+\_\+mode\+\_\+create}} (\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} Fs, int frame\+\_\+size, int \texorpdfstring{$\ast$}{*}error)
\begin{DoxyCompactList}\small\item\em Creates a new mode struct. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__opus__custom_ga1333ad19db2acd8edf558ac6365741de}{opus\+\_\+custom\+\_\+mode\+\_\+destroy}} (\mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}mode)
\begin{DoxyCompactList}\small\item\em Destroys a mode struct. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_ga42f50e7f2942144c18c321f00f358ba0}{opus\+\_\+custom\+\_\+encoder\+\_\+get\+\_\+size}} (const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}mode, int channels)
\begin{DoxyCompactList}\small\item\em Gets the size of an Opus\+Custom\+Encoder structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__opus__custom_ga759613361dc3cf5b648b42fa53254d6f}{opus\+\_\+custom\+\_\+encoder\+\_\+create}} (const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}mode, int channels, int \texorpdfstring{$\ast$}{*}error)
\begin{DoxyCompactList}\small\item\em Creates a new encoder state. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__opus__custom_ga5ed5b55bccdc141632d8ba65b8228e7d}{opus\+\_\+custom\+\_\+encoder\+\_\+destroy}} (\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}st)
\begin{DoxyCompactList}\small\item\em Destroys an encoder state. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_ga9403d7a1fc09a0e49692a7f93decee21}{opus\+\_\+custom\+\_\+encode\+\_\+float}} (\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}st, const float \texorpdfstring{$\ast$}{*}pcm, int frame\+\_\+size, unsigned char \texorpdfstring{$\ast$}{*}compressed, int max\+Compressed\+Bytes)
\begin{DoxyCompactList}\small\item\em Encodes a frame of audio. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_ga21d6b0c4106ed5777a8632eed97d4cdc}{opus\+\_\+custom\+\_\+encode}} (\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}st, const \mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} \texorpdfstring{$\ast$}{*}pcm, int frame\+\_\+size, unsigned char \texorpdfstring{$\ast$}{*}compressed, int max\+Compressed\+Bytes)
\begin{DoxyCompactList}\small\item\em Encodes a frame of audio. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_gacf3d854e681cae3b693ee56b54459226}{opus\+\_\+custom\+\_\+encoder\+\_\+ctl}} (\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}OPUS\+\_\+\+RESTRICT st, int request,...)
\begin{DoxyCompactList}\small\item\em Perform a CTL function on an Opus custom encoder. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_gabe5d6f5f85dcad3ce8b88fe4b2642d2b}{opus\+\_\+custom\+\_\+decoder\+\_\+get\+\_\+size}} (const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}mode, int channels)
\begin{DoxyCompactList}\small\item\em Gets the size of an Opus\+Custom\+Decoder structure. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_gad4cb362035313c8f77c24cd29dd0932b}{opus\+\_\+custom\+\_\+decoder\+\_\+init}} (\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}st, const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}mode, int channels)
\begin{DoxyCompactList}\small\item\em Initializes a previously allocated decoder state The memory pointed to by st must be the size returned by opus\+\_\+custom\+\_\+decoder\+\_\+get\+\_\+size. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__opus__custom_ga6c7daa35f13053844ebc2101fd7ec703}{opus\+\_\+custom\+\_\+decoder\+\_\+create}} (const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}mode, int channels, int \texorpdfstring{$\ast$}{*}error)
\begin{DoxyCompactList}\small\item\em Creates a new decoder state. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__opus__custom_ga0e59e6389bd6478e9c3be48aff4459e1}{opus\+\_\+custom\+\_\+decoder\+\_\+destroy}} (\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}st)
\begin{DoxyCompactList}\small\item\em Destroys a decoder state. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_gac2c34002d4f546a535125e2780c81656}{opus\+\_\+custom\+\_\+decode\+\_\+float}} (\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}st, const unsigned char \texorpdfstring{$\ast$}{*}data, int len, float \texorpdfstring{$\ast$}{*}pcm, int frame\+\_\+size)
\begin{DoxyCompactList}\small\item\em Decode an opus custom frame with floating point output. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_gafb6d3b90eed41b938009f4a32d633363}{opus\+\_\+custom\+\_\+decode}} (\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}st, const unsigned char \texorpdfstring{$\ast$}{*}data, int len, \mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} \texorpdfstring{$\ast$}{*}pcm, int frame\+\_\+size)
\begin{DoxyCompactList}\small\item\em Decode an opus custom frame. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__opus__custom_ga88b9248e497f3c1b894f035011c569a9}{opus\+\_\+custom\+\_\+decoder\+\_\+ctl}} (\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}OPUS\+\_\+\+RESTRICT st, int request,...)
\begin{DoxyCompactList}\small\item\em Perform a CTL function on an Opus custom decoder. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Opus Custom is an optional part of the Opus specification and reference implementation which uses a distinct API from the regular API and supports frame sizes that are not normally supported. Use of Opus Custom is discouraged for all but very special applications for which a frame size different from 2.\+5, 5, 10, or 20 ms is needed (for either complexity or latency reasons) and where interoperability is less important. 

In addition to the interoperability limitations the use of Opus custom disables a substantial chunk of the codec and generally lowers the quality available at a given bitrate. Normally when an application needs a different frame size from the codec it should buffer to match the sizes but this adds a small amount of delay which may be important in some very low latency applications. Some transports (especially constant rate RF transports) may also work best with frames of particular durations.

Libopus only supports custom modes if they are enabled at compile time.

The Opus Custom API is similar to the regular API but the \doxylink{group__opus__encoder_ga0720d9d1efff65b905a64226a81070ff}{opus\+\_\+encoder\+\_\+create} and \doxylink{group__opus__decoder_ga6c1829854bf2de7b58adae1894ad1e27}{opus\+\_\+decoder\+\_\+create} calls take an additional mode parameter which is a structure produced by a call to \doxylink{group__opus__custom_gac248b6f0c693ba2f4cf99f3487974400}{opus\+\_\+custom\+\_\+mode\+\_\+create}. Both the encoder and decoder must create a mode using the same sample rate (fs) and frame size (frame size) so these parameters must either be signaled out of band or fixed in a particular implementation.

Similar to regular Opus the custom modes support on the fly frame size switching, but the sizes available depend on the particular frame size in use. For some initial frame sizes on a single on the fly size is available. 

\doxysubsection{Typedef Documentation}
\Hypertarget{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}\label{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f} 
\index{Opus Custom@{Opus Custom}!OpusCustomDecoder@{OpusCustomDecoder}}
\index{OpusCustomDecoder@{OpusCustomDecoder}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{OpusCustomDecoder}{OpusCustomDecoder}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}}}



State of the decoder. 

One decoder state is needed for each stream. It is initialized once at the beginning of the stream. Do {\itshape not} re-\/initialize the state for every frame.

Decoder state \Hypertarget{group__opus__custom_ga7abe6a7afc599667950251c987feb439}\label{group__opus__custom_ga7abe6a7afc599667950251c987feb439} 
\index{Opus Custom@{Opus Custom}!OpusCustomEncoder@{OpusCustomEncoder}}
\index{OpusCustomEncoder@{OpusCustomEncoder}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{OpusCustomEncoder}{OpusCustomEncoder}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}}}



Contains the state of an encoder. 

One encoder state is needed for each stream. It is initialized once at the beginning of the stream. Do {\itshape not} re-\/initialize the state for every frame.

Encoder state \Hypertarget{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}\label{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f} 
\index{Opus Custom@{Opus Custom}!OpusCustomMode@{OpusCustomMode}}
\index{OpusCustomMode@{OpusCustomMode}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{OpusCustomMode}{OpusCustomMode}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}}}



The mode contains all the information necessary to create an encoder. 

Both the encoder and decoder need to be initialized with exactly the same mode, otherwise the output will be corrupted. The mode MUST NOT BE DESTROYED until the encoders and decoders that use it are destroyed as well.

Mode configuration 

\doxysubsection{Function Documentation}
\Hypertarget{group__opus__custom_gafb6d3b90eed41b938009f4a32d633363}\label{group__opus__custom_gafb6d3b90eed41b938009f4a32d633363} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_decode@{opus\_custom\_decode}}
\index{opus\_custom\_decode@{opus\_custom\_decode}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_decode()}{opus\_custom\_decode()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+decode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}}]{st,  }\item[{const unsigned char \texorpdfstring{$\ast$}{*}}]{data,  }\item[{int}]{len,  }\item[{\mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} \texorpdfstring{$\ast$}{*}}]{pcm,  }\item[{int}]{frame\+\_\+size }\end{DoxyParamCaption})}



Decode an opus custom frame. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em st} & {\ttfamily Opus\+Custom\+Decoder\texorpdfstring{$\ast$}{*}}\+: Decoder state \\
\hline
\mbox{\texttt{ in}}  & {\em data} & {\ttfamily char\texorpdfstring{$\ast$}{*}}\+: Input payload. Use a NULL pointer to indicate packet loss \\
\hline
\mbox{\texttt{ in}}  & {\em len} & {\ttfamily int}\+: Number of bytes in payload \\
\hline
\mbox{\texttt{ out}}  & {\em pcm} & {\ttfamily opus\+\_\+int16\texorpdfstring{$\ast$}{*}}\+: Output signal (interleaved if 2 channels). length is frame\+\_\+size\texorpdfstring{$\ast$}{*}channels\texorpdfstring{$\ast$}{*}sizeof(opus\+\_\+int16) \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+\_\+size} & Number of samples per channel of available space in \texorpdfstring{$\ast$}{*}pcm. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of decoded samples or \doxylink{group__opus__errorcodes}{Error codes} 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_gac2c34002d4f546a535125e2780c81656}\label{group__opus__custom_gac2c34002d4f546a535125e2780c81656} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_decode\_float@{opus\_custom\_decode\_float}}
\index{opus\_custom\_decode\_float@{opus\_custom\_decode\_float}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_decode\_float()}{opus\_custom\_decode\_float()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+decode\+\_\+float (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}}]{st,  }\item[{const unsigned char \texorpdfstring{$\ast$}{*}}]{data,  }\item[{int}]{len,  }\item[{float \texorpdfstring{$\ast$}{*}}]{pcm,  }\item[{int}]{frame\+\_\+size }\end{DoxyParamCaption})}



Decode an opus custom frame with floating point output. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em st} & {\ttfamily Opus\+Custom\+Decoder\texorpdfstring{$\ast$}{*}}\+: Decoder state \\
\hline
\mbox{\texttt{ in}}  & {\em data} & {\ttfamily char\texorpdfstring{$\ast$}{*}}\+: Input payload. Use a NULL pointer to indicate packet loss \\
\hline
\mbox{\texttt{ in}}  & {\em len} & {\ttfamily int}\+: Number of bytes in payload \\
\hline
\mbox{\texttt{ out}}  & {\em pcm} & {\ttfamily float\texorpdfstring{$\ast$}{*}}\+: Output signal (interleaved if 2 channels). length is frame\+\_\+size\texorpdfstring{$\ast$}{*}channels\texorpdfstring{$\ast$}{*}sizeof(float) \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+\_\+size} & Number of samples per channel of available space in \texorpdfstring{$\ast$}{*}pcm. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of decoded samples or \doxylink{group__opus__errorcodes}{Error codes} 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_ga6c7daa35f13053844ebc2101fd7ec703}\label{group__opus__custom_ga6c7daa35f13053844ebc2101fd7ec703} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_decoder\_create@{opus\_custom\_decoder\_create}}
\index{opus\_custom\_decoder\_create@{opus\_custom\_decoder\_create}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_decoder\_create()}{opus\_custom\_decoder\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*} opus\+\_\+custom\+\_\+decoder\+\_\+create (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}}]{mode,  }\item[{int}]{channels,  }\item[{int \texorpdfstring{$\ast$}{*}}]{error }\end{DoxyParamCaption})}



Creates a new decoder state. 

Each stream needs its own decoder state (can\textquotesingle{}t be shared across simultaneous streams). 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mode} & {\ttfamily Opus\+Custom\+Mode}\+: Contains all the information about the characteristics of the stream (must be the same characteristics as used for the encoder) \\
\hline
\mbox{\texttt{ in}}  & {\em channels} & {\ttfamily int}\+: Number of channels \\
\hline
\mbox{\texttt{ out}}  & {\em error} & {\ttfamily int\texorpdfstring{$\ast$}{*}}\+: Returns an error code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Newly created decoder state. 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_ga88b9248e497f3c1b894f035011c569a9}\label{group__opus__custom_ga88b9248e497f3c1b894f035011c569a9} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_decoder\_ctl@{opus\_custom\_decoder\_ctl}}
\index{opus\_custom\_decoder\_ctl@{opus\_custom\_decoder\_ctl}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_decoder\_ctl()}{opus\_custom\_decoder\_ctl()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+decoder\+\_\+ctl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}OPUS\+\_\+\+RESTRICT}]{st,  }\item[{int}]{request,  }\item[{}]{... }\end{DoxyParamCaption})}



Perform a CTL function on an Opus custom decoder. 

Generally the request and subsequent arguments are generated by a convenience macro. \begin{DoxySeeAlso}{See also}
\doxylink{group__opus__genericctls}{Generic CTLs} 
\end{DoxySeeAlso}
\Hypertarget{group__opus__custom_ga0e59e6389bd6478e9c3be48aff4459e1}\label{group__opus__custom_ga0e59e6389bd6478e9c3be48aff4459e1} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_decoder\_destroy@{opus\_custom\_decoder\_destroy}}
\index{opus\_custom\_decoder\_destroy@{opus\_custom\_decoder\_destroy}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_decoder\_destroy()}{opus\_custom\_decoder\_destroy()}}
{\footnotesize\ttfamily void opus\+\_\+custom\+\_\+decoder\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}}]{st }\end{DoxyParamCaption})}



Destroys a decoder state. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em st} & {\ttfamily Opus\+Custom\+Decoder\texorpdfstring{$\ast$}{*}}\+: State to be freed. \\
\hline
\end{DoxyParams}
\Hypertarget{group__opus__custom_gabe5d6f5f85dcad3ce8b88fe4b2642d2b}\label{group__opus__custom_gabe5d6f5f85dcad3ce8b88fe4b2642d2b} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_decoder\_get\_size@{opus\_custom\_decoder\_get\_size}}
\index{opus\_custom\_decoder\_get\_size@{opus\_custom\_decoder\_get\_size}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_decoder\_get\_size()}{opus\_custom\_decoder\_get\_size()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+decoder\+\_\+get\+\_\+size (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}}]{mode,  }\item[{int}]{channels }\end{DoxyParamCaption})}



Gets the size of an Opus\+Custom\+Decoder structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mode} & {\ttfamily Opus\+Custom\+Mode \texorpdfstring{$\ast$}{*}}\+: Mode configuration \\
\hline
\mbox{\texttt{ in}}  & {\em channels} & {\ttfamily int}\+: Number of channels \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_gad4cb362035313c8f77c24cd29dd0932b}\label{group__opus__custom_gad4cb362035313c8f77c24cd29dd0932b} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_decoder\_init@{opus\_custom\_decoder\_init}}
\index{opus\_custom\_decoder\_init@{opus\_custom\_decoder\_init}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_decoder\_init()}{opus\_custom\_decoder\_init()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+decoder\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_gacae60f89c5ce7aeea69503451b9e2e6f}{Opus\+Custom\+Decoder}} \texorpdfstring{$\ast$}{*}}]{st,  }\item[{const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}}]{mode,  }\item[{int}]{channels }\end{DoxyParamCaption})}



Initializes a previously allocated decoder state The memory pointed to by st must be the size returned by opus\+\_\+custom\+\_\+decoder\+\_\+get\+\_\+size. 

This is intended for applications which use their own allocator instead of malloc. \begin{DoxySeeAlso}{See also}
\doxylink{group__opus__custom_ga6c7daa35f13053844ebc2101fd7ec703}{opus\+\_\+custom\+\_\+decoder\+\_\+create()},\doxylink{group__opus__custom_gabe5d6f5f85dcad3ce8b88fe4b2642d2b}{opus\+\_\+custom\+\_\+decoder\+\_\+get\+\_\+size()} To reset a previously initialized state use the \doxylink{group__opus__genericctls_gadc74e4fa8bcdf9994187d52d92207337}{OPUS\+\_\+\+RESET\+\_\+\+STATE} CTL. 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em st} & {\ttfamily Opus\+Custom\+Decoder\texorpdfstring{$\ast$}{*}}\+: Decoder state \\
\hline
\mbox{\texttt{ in}}  & {\em mode} & {\ttfamily Opus\+Custom\+Mode \texorpdfstring{$\ast$}{*}}\+: Contains all the information about the characteristics of the stream (must be the same characteristics as used for the encoder) \\
\hline
\mbox{\texttt{ in}}  & {\em channels} & {\ttfamily int}\+: Number of channels \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OPUS\+\_\+\+OK Success or \doxylink{group__opus__errorcodes}{Error codes} 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_ga21d6b0c4106ed5777a8632eed97d4cdc}\label{group__opus__custom_ga21d6b0c4106ed5777a8632eed97d4cdc} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_encode@{opus\_custom\_encode}}
\index{opus\_custom\_encode@{opus\_custom\_encode}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_encode()}{opus\_custom\_encode()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+encode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}}]{st,  }\item[{const \mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} \texorpdfstring{$\ast$}{*}}]{pcm,  }\item[{int}]{frame\+\_\+size,  }\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{compressed,  }\item[{int}]{max\+Compressed\+Bytes }\end{DoxyParamCaption})}



Encodes a frame of audio. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em st} & {\ttfamily Opus\+Custom\+Encoder\texorpdfstring{$\ast$}{*}}\+: Encoder state \\
\hline
\mbox{\texttt{ in}}  & {\em pcm} & {\ttfamily opus\+\_\+int16\texorpdfstring{$\ast$}{*}}\+: PCM audio in signed 16-\/bit format (native endian). There must be exactly frame\+\_\+size samples per channel. \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+\_\+size} & {\ttfamily int}\+: Number of samples per frame of input signal \\
\hline
\mbox{\texttt{ out}}  & {\em compressed} & {\ttfamily char \texorpdfstring{$\ast$}{*}}\+: The compressed data is written here. This may not alias pcm and must be at least max\+Compressed\+Bytes long. \\
\hline
\mbox{\texttt{ in}}  & {\em max\+Compressed\+Bytes} & {\ttfamily int}\+: Maximum number of bytes to use for compressing the frame (can change from one frame to another) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of bytes written to \"{}compressed\"{}. If negative, an error has occurred (see error codes). It is IMPORTANT that the length returned be somehow transmitted to the decoder. Otherwise, no decoding is possible. 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_ga9403d7a1fc09a0e49692a7f93decee21}\label{group__opus__custom_ga9403d7a1fc09a0e49692a7f93decee21} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_encode\_float@{opus\_custom\_encode\_float}}
\index{opus\_custom\_encode\_float@{opus\_custom\_encode\_float}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_encode\_float()}{opus\_custom\_encode\_float()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+encode\+\_\+float (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}}]{st,  }\item[{const float \texorpdfstring{$\ast$}{*}}]{pcm,  }\item[{int}]{frame\+\_\+size,  }\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{compressed,  }\item[{int}]{max\+Compressed\+Bytes }\end{DoxyParamCaption})}



Encodes a frame of audio. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em st} & {\ttfamily Opus\+Custom\+Encoder\texorpdfstring{$\ast$}{*}}\+: Encoder state \\
\hline
\mbox{\texttt{ in}}  & {\em pcm} & {\ttfamily float\texorpdfstring{$\ast$}{*}}\+: PCM audio in float format, with a normal range of +/-\/1.0. Samples with a range beyond +/-\/1.0 are supported but will be clipped by decoders using the integer API and should only be used if it is known that the far end supports extended dynamic range. There must be exactly frame\+\_\+size samples per channel. \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+\_\+size} & {\ttfamily int}\+: Number of samples per frame of input signal \\
\hline
\mbox{\texttt{ out}}  & {\em compressed} & {\ttfamily char \texorpdfstring{$\ast$}{*}}\+: The compressed data is written here. This may not alias pcm and must be at least max\+Compressed\+Bytes long. \\
\hline
\mbox{\texttt{ in}}  & {\em max\+Compressed\+Bytes} & {\ttfamily int}\+: Maximum number of bytes to use for compressing the frame (can change from one frame to another) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of bytes written to \"{}compressed\"{}. If negative, an error has occurred (see error codes). It is IMPORTANT that the length returned be somehow transmitted to the decoder. Otherwise, no decoding is possible. 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_ga759613361dc3cf5b648b42fa53254d6f}\label{group__opus__custom_ga759613361dc3cf5b648b42fa53254d6f} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_encoder\_create@{opus\_custom\_encoder\_create}}
\index{opus\_custom\_encoder\_create@{opus\_custom\_encoder\_create}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_encoder\_create()}{opus\_custom\_encoder\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*} opus\+\_\+custom\+\_\+encoder\+\_\+create (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}}]{mode,  }\item[{int}]{channels,  }\item[{int \texorpdfstring{$\ast$}{*}}]{error }\end{DoxyParamCaption})}



Creates a new encoder state. 

Each stream needs its own encoder state (can\textquotesingle{}t be shared across simultaneous streams). 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mode} & {\ttfamily Opus\+Custom\+Mode\texorpdfstring{$\ast$}{*}}\+: Contains all the information about the characteristics of the stream (must be the same characteristics as used for the decoder) \\
\hline
\mbox{\texttt{ in}}  & {\em channels} & {\ttfamily int}\+: Number of channels \\
\hline
\mbox{\texttt{ out}}  & {\em error} & {\ttfamily int\texorpdfstring{$\ast$}{*}}\+: Returns an error code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Newly created encoder state. 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_gacf3d854e681cae3b693ee56b54459226}\label{group__opus__custom_gacf3d854e681cae3b693ee56b54459226} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_encoder\_ctl@{opus\_custom\_encoder\_ctl}}
\index{opus\_custom\_encoder\_ctl@{opus\_custom\_encoder\_ctl}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_encoder\_ctl()}{opus\_custom\_encoder\_ctl()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+encoder\+\_\+ctl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}OPUS\+\_\+\+RESTRICT}]{st,  }\item[{int}]{request,  }\item[{}]{... }\end{DoxyParamCaption})}



Perform a CTL function on an Opus custom encoder. 

Generally the request and subsequent arguments are generated by a convenience macro. \begin{DoxySeeAlso}{See also}
\doxylink{group__opus__encoderctls}{Encoder related CTLs} 
\end{DoxySeeAlso}
\Hypertarget{group__opus__custom_ga5ed5b55bccdc141632d8ba65b8228e7d}\label{group__opus__custom_ga5ed5b55bccdc141632d8ba65b8228e7d} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_encoder\_destroy@{opus\_custom\_encoder\_destroy}}
\index{opus\_custom\_encoder\_destroy@{opus\_custom\_encoder\_destroy}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_encoder\_destroy()}{opus\_custom\_encoder\_destroy()}}
{\footnotesize\ttfamily void opus\+\_\+custom\+\_\+encoder\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_ga7abe6a7afc599667950251c987feb439}{Opus\+Custom\+Encoder}} \texorpdfstring{$\ast$}{*}}]{st }\end{DoxyParamCaption})}



Destroys an encoder state. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em st} & {\ttfamily Opus\+Custom\+Encoder\texorpdfstring{$\ast$}{*}}\+: State to be freed. \\
\hline
\end{DoxyParams}
\Hypertarget{group__opus__custom_ga42f50e7f2942144c18c321f00f358ba0}\label{group__opus__custom_ga42f50e7f2942144c18c321f00f358ba0} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_encoder\_get\_size@{opus\_custom\_encoder\_get\_size}}
\index{opus\_custom\_encoder\_get\_size@{opus\_custom\_encoder\_get\_size}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_encoder\_get\_size()}{opus\_custom\_encoder\_get\_size()}}
{\footnotesize\ttfamily int opus\+\_\+custom\+\_\+encoder\+\_\+get\+\_\+size (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}}]{mode,  }\item[{int}]{channels }\end{DoxyParamCaption})}



Gets the size of an Opus\+Custom\+Encoder structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mode} & {\ttfamily Opus\+Custom\+Mode \texorpdfstring{$\ast$}{*}}\+: Mode configuration \\
\hline
\mbox{\texttt{ in}}  & {\em channels} & {\ttfamily int}\+: Number of channels \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_gac248b6f0c693ba2f4cf99f3487974400}\label{group__opus__custom_gac248b6f0c693ba2f4cf99f3487974400} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_mode\_create@{opus\_custom\_mode\_create}}
\index{opus\_custom\_mode\_create@{opus\_custom\_mode\_create}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_mode\_create()}{opus\_custom\_mode\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*} opus\+\_\+custom\+\_\+mode\+\_\+create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{Fs,  }\item[{int}]{frame\+\_\+size,  }\item[{int \texorpdfstring{$\ast$}{*}}]{error }\end{DoxyParamCaption})}



Creates a new mode struct. 

This will be passed to an encoder or decoder. The mode MUST NOT BE DESTROYED until the encoders and decoders that use it are destroyed as well. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em Fs} & {\ttfamily int}\+: Sampling rate (8000 to 96000 Hz) \\
\hline
\mbox{\texttt{ in}}  & {\em frame\+\_\+size} & {\ttfamily int}\+: Number of samples (per channel) to encode in each packet (64 -\/ 1024, prime factorization must contain zero or more 2s, 3s, or 5s and no other primes) \\
\hline
\mbox{\texttt{ out}}  & {\em error} & {\ttfamily int\texorpdfstring{$\ast$}{*}}\+: Returned error code (if NULL, no error will be returned) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A newly created mode 
\end{DoxyReturn}
\Hypertarget{group__opus__custom_ga1333ad19db2acd8edf558ac6365741de}\label{group__opus__custom_ga1333ad19db2acd8edf558ac6365741de} 
\index{Opus Custom@{Opus Custom}!opus\_custom\_mode\_destroy@{opus\_custom\_mode\_destroy}}
\index{opus\_custom\_mode\_destroy@{opus\_custom\_mode\_destroy}!Opus Custom@{Opus Custom}}
\doxysubsubsection{\texorpdfstring{opus\_custom\_mode\_destroy()}{opus\_custom\_mode\_destroy()}}
{\footnotesize\ttfamily void opus\+\_\+custom\+\_\+mode\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__custom_gaf33847c711195b9edef896b73c96ec4f}{Opus\+Custom\+Mode}} \texorpdfstring{$\ast$}{*}}]{mode }\end{DoxyParamCaption})}



Destroys a mode struct. 

Only call this after all encoders and decoders using this mode are destroyed as well. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em mode} & {\ttfamily Opus\+Custom\+Mode\texorpdfstring{$\ast$}{*}}\+: Mode to be freed. \\
\hline
\end{DoxyParams}
